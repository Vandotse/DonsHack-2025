<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transactions - FlexiBudget</title>
  <link rel="stylesheet" href="static/css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .logo {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .logo img {
      max-width: 50px;
      margin-right: 10px;
    }
    
    .logo h1 {
      margin: 0;
      font-size: 1.5rem;
    }
    
    .transaction-filters {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    
    .filter-item {
      display: flex;
      align-items: center;
    }
    
    .filter-item label {
      margin-right: 0.5rem;
      font-weight: 500;
    }
    
    .filter-item select, .filter-item input {
      padding: 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      min-width: 150px;
    }
    
    .filter-button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .filter-button:hover {
      background-color: var(--secondary-color);
      color: #000;
    }
    
    .transactions-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    
    .transactions-table th {
      text-align: left;
      padding: 1rem;
      border-bottom: 2px solid var(--border-color);
      color: var(--text-color);
      font-weight: 600;
    }
    
    .transactions-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .transaction-location {
      display: flex;
      align-items: center;
    }
    
    .location-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      color: var(--primary-color);
    }
    
    .transaction-amount {
      font-weight: 600;
      color: var(--danger-color);
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 2rem;
      gap: 0.5rem;
    }
    
    .pagination button {
      width: 40px;
      height: 40px;
      border-radius: 5px;
      border: 1px solid var(--border-color);
      background-color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s;
    }
    
    .pagination button.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .pagination button:hover:not(.active) {
      background-color: var(--secondary-color);
      color: #000;
      border-color: var(--secondary-color);
    }
    
    .summary-card {
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .summary-item {
      background-color: white;
      padding: 1.5rem;
      border-radius: 10px;
      flex: 1;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }
    
    .summary-item h3 {
      margin-bottom: 0.5rem;
      color: var(--text-light);
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .summary-item .value {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    .summary-item.main-value {
      background-color: var(--primary-color);
      color: white;
    }
    
    .summary-item.main-value h3, .summary-item.main-value .value {
      color: white;
    }

    .transaction-status {
      background-color: #e8f5e9;
      color: #00543C; /* USFCA green */
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <nav class="sidebar">
      <div class="logo">
        <img src="static/img/usfca-logo.png" alt="USFCA Logo">
        <h1>FlexiBudget</h1>
      </div>
      <ul class="menu">
        <li><a href="index.html"><i class="fas fa-home"></i> Dashboard</a></li>
        <li class="active"><a href="transactions.html"><i class="fas fa-history"></i> Transactions</a></li>
        <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
      </ul>
      <div class="sidebar-footer">
        <p>Version 0.1.0</p>
      </div>
    </nav>

    <main class="content">
      <header>
        <div class="user-info">
          <img src="static/img/avatar.svg" alt="User Avatar" class="avatar">
          <div>
            <h2>Hello, <span id="username">Student</span></h2>
            <p>View your transaction history</p>
          </div>
        </div>
      </header>

      <section class="transactions-content">
        <div class="summary-card">
          <div class="summary-item">
            <h3>TOTAL TRANSACTIONS</h3>
            <div class="value">28</div>
          </div>
          <div class="summary-item main-value">
            <h3>CURRENT BALANCE</h3>
            <div class="value">$<span id="summary-balance">1,250.00</span></div>
          </div>
          <div class="summary-item">
            <h3>TOTAL SPENT</h3>
            <div class="value">$<span id="summary-spent">250.00</span></div>
          </div>
          <div class="summary-item">
            <h3>AVG. TRANSACTION</h3>
            <div class="value">$8.93</div>
          </div>
        </div>
        
        <div class="card">
          <h2>Transaction History</h2>
          
          <div class="transaction-filters">
            <div class="filter-item">
              <label for="date-range">Date Range</label>
              <select id="date-range">
                <option value="all">All Time</option>
                <option value="this-week" selected>This Week</option>
                <option value="last-week">Last Week</option>
                <option value="this-month">This Month</option>
                <option value="custom">Custom Range</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label for="location">Location</label>
              <select id="location">
                <option value="all" selected>All Locations</option>
                <option value="campus-cafe">Campus Café</option>
                <option value="bookstore">University Bookstore</option>
                <option value="student-center">Student Center</option>
                <option value="food-truck">Food Truck Rally</option>
              </select>
            </div>
            
            <div class="filter-item">
              <label for="amount">Amount</label>
              <select id="amount">
                <option value="all" selected>All Amounts</option>
                <option value="under-5">Under $5</option>
                <option value="5-10">$5 - $10</option>
                <option value="10-20">$10 - $20</option>
                <option value="over-20">Over $20</option>
              </select>
            </div>
            
            <button id="apply-filters" class="filter-button">Apply Filters</button>
          </div>
          
          <table class="transactions-table">
            <thead>
              <tr>
                <th>DATE & TIME</th>
                <th>LOCATION</th>
                <th>AMOUNT</th>
                <th>STATUS</th>
              </tr>
            </thead>
            <tbody id="transactions-table-body">
            </tbody>
          </table>
          
          <div class="pagination" id="pagination">
            <button><i class="fas fa-chevron-left"></i></button>
            <button class="active">1</button>
            <button>2</button>
            <button>3</button>
            <button><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="static/js/main.js"></script>
  <script src="static/js/transactions.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('summary-balance').textContent = userData.currentBalance.toFixed(2);
      document.getElementById('summary-spent').textContent = userData.spent.toFixed(2);
      
      generateTransactionHistory();
      
      document.getElementById('apply-filters').addEventListener('click', filterTransactions);
    });
    
    function generateTransactionHistory() {
      const allTransactions = [...transactions];
      
      const locations = [
        { name: "Campus Café", icon: "fa-utensils" },
        { name: "University Bookstore", icon: "fa-book" },
        { name: "Student Center", icon: "fa-mug-hot" },
        { name: "Food Truck Rally", icon: "fa-truck" },
        { name: "Late Night Grill", icon: "fa-hamburger" },
        { name: "Campus Store", icon: "fa-shopping-bag" },
        { name: "Library Café", icon: "fa-coffee" }
      ];
      
      const today = new Date();
      for (let i = 6; i < 30; i++) {
        const randomLocation = locations[Math.floor(Math.random() * locations.length)];
        const randomAmount = (Math.random() * 20 + 2).toFixed(2);
        const randomDay = new Date(today);
        randomDay.setDate(today.getDate() - Math.floor(Math.random() * 30));
        
        allTransactions.push({
          id: i,
          name: randomLocation.name,
          amount: parseFloat(randomAmount),
          date: randomDay.toISOString(),
          icon: randomLocation.icon
        });
      }
      
      allTransactions.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      displayTransactionTable(allTransactions);
    }
    
    function displayTransactionTable(transactionsToDisplay) {
      const tableBody = document.getElementById('transactions-table-body');
      tableBody.innerHTML = '';
      
      transactionsToDisplay.forEach(transaction => {
        const row = document.createElement('tr');
        
        const transactionDate = new Date(transaction.date);
        const formattedDate = transactionDate.toLocaleDateString(undefined, { 
          year: 'numeric',
          month: 'short', 
          day: 'numeric' 
        });
        const formattedTime = transactionDate.toLocaleTimeString(undefined, { 
          hour: '2-digit', 
          minute: '2-digit' 
        });
        
        row.innerHTML = `
          <td>
            <div>${formattedDate}</div>
            <div style="color: var(--text-light); font-size: 0.9rem;">${formattedTime}</div>
          </td>
          <td>
            <div class="transaction-location">
              <div class="location-icon">
                <i class="fas ${transaction.icon}"></i>
              </div>
              <div>${transaction.name}</div>
            </div>
          </td>
          <td class="transaction-amount">-$${transaction.amount.toFixed(2)}</td>
          <td><span class="transaction-status">Completed</span></td>
        `;
        
        tableBody.appendChild(row);
      });
    }
    
    function filterTransactions() {
      alert('Filters applied. In a full implementation, this would filter the transactions based on your selections.');
    }
  </script>
</body>
</html> 